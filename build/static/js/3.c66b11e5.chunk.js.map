{"version":3,"sources":["services/login.js","services/token.js","components/Login/Login.js"],"names":["credentials","console","log","axios","post","then","response","data","catch","err","newToken","token","window","localStorage","setItem","Login","setLoggedIn","useState","username","setUsername","password","setPassword","history","useHistory","className","onSubmit","event","preventDefault","credObject","trim","loginService","returnedObject","tokenService","helper","showtoast","push","htmlFor","type","name","id","value","onChange","target","to"],"mappings":"+MASe,EAPD,SAAAA,GAGX,OAFAC,QAAQC,IAAI,wBACIC,IAAMC,KAAK,cAAeJ,GAC3BK,MAAK,SAAAC,GAAQ,OAAIA,EAASC,QAC1BC,OAAM,SAAAC,GAAG,OAAIR,QAAQC,IAAIO,OCD5B,EALE,SAAAC,GACf,IAAMC,EAAK,iBAAaD,GACxBE,OAAOC,aAAaC,QAAQ,QAASH,I,OCyFxBI,UApFD,SAAC,GAAqB,IAAnBC,EAAkB,EAAlBA,YAAkB,EAECC,mBAAS,IAFV,mBAEzBC,EAFyB,KAEfC,EAFe,OAICF,mBAAS,IAJV,mBAIzBG,EAJyB,KAIfC,EAJe,KAM3BC,EAAUC,cA2ChB,OACC,yBAAKC,UAAU,SACb,yBAAKA,UAAU,WAAf,YACA,yBAAKA,UAAU,cAAf,qCACA,yBAAKA,UAAU,kBAChB,0BAAMC,SAtCY,SAACC,GAClBzB,QAAQC,IAAI,uBACZwB,EAAMC,iBAEN,IAAMC,EAAa,CACjBV,SAAUA,EAASW,OACnBT,SAAUA,EAASS,QAGrB5B,QAAQC,IAAI4B,GAEZA,EACSF,GACNvB,MAAK,SAAA0B,GACH9B,QAAQC,IAAI6B,GACLA,GACJf,GAAY,GACZgB,EAAsBD,EAAepB,OACxCC,OAAOC,aAAaC,QACf,WAAY,QAEjBF,OAAOC,aAAaC,QAChB,aAAcI,GAElBe,IAAOC,UAAU,sBACjBZ,EAAQa,KAAK,WAEVlC,QAAQC,IAAI,yBACf+B,IAAOC,UAAU,+BAWvB,2BAAOE,QAAQ,WAAWZ,UAAU,YAApC,YACH,2BACGa,KAAK,OACLC,KAAK,WACLC,GAAG,WACHC,MAAOtB,EACPuB,SArD2B,SAACf,GAC3BP,EAAYO,EAAMgB,OAAOF,UAsD5B,2BAAOJ,QAAQ,WAAWZ,UAAU,YAApC,YACA,2BACEa,KAAK,WACLC,KAAK,WACLC,GAAG,WACHC,MAAOpB,EACPqB,SAzD2B,SAACf,GAC3BL,EAAYK,EAAMgB,OAAOF,UA0D5B,2BACEH,KAAK,SACLE,GAAG,QACHC,MAAM,QACNF,KAAK,WAEP,kBAAC,IAAD,CAAMC,GAAG,QAAQI,GAAG,WAApB","file":"static/js/3.c66b11e5.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst login = credentials => {\n   console.log('inside login service')\n   const request = axios.post('/api/login/', credentials)\n   return request.then(response => response.data)\n                 .catch(err => console.log(err))\n}\n\nexport default { login }\n","const setToken = newToken => {\n  const token = `bearer ${newToken}`\n  window.localStorage.setItem('token', token)\n}\n\nexport default { setToken }\n","import React, { useState } from 'react'\nimport { useHistory, Link } from 'react-router-dom'\nimport './Login.css'\nimport loginService from '../../services/login.js'\nimport tokenService from '../../services/token.js'\nimport helper from './../utils/helper.js'\n\nconst Login = ({ setLoggedIn }) => {\n  \n  const [ username, setUsername ] = useState('')\n\n  const [ password, setPassword ] = useState('')\n\n  const history = useHistory()\n\n  const handleUsernameChange = (event) => {\n     setUsername(event.target.value)\n  }\n\n  const handlePasswordChange = (event) => {\n     setPassword(event.target.value)\n  }\n\n  const handleLogin = (event) => {\n     console.log('inside handle login')\n     event.preventDefault()\n\n     const credObject = {\n       username: username.trim(),\n       password: password.trim(),\n     }\n\n     console.log(loginService.login)\n\n     loginService\n       .login(credObject)\n       .then(returnedObject => {\n\t         console.log(returnedObject)\n             if (returnedObject) {\n\t            setLoggedIn(true)\n\t            tokenService.setToken(returnedObject.token)\n\t\t        window.localStorage.setItem(\n\t\t             'loggedIn', 'true'\n\t         \t)\n\t\t        window.localStorage.setItem(\n\t\t            'loggedUser', username\n\t\t        )\n\t\t        helper.showtoast(\"Login Successful!!\")\n\t\t        history.push('/home')\n\t        } else {\n\t            console.log('error while loggin in')\n\t\t        helper.showtoast(\"Invalid Credentials!!\")\n\t        }\n       })\n  }\n\n  return (\n   <div className=\"login\">\n     <div className=\"heading\">COOKBOOK</div>\n     <div className=\"subheading\">A Food Recipe Sharing Application</div>\n     <div className=\"lformcontainer\">\n    <form onSubmit={handleLogin}>\n    <label htmlFor=\"username\" className=\"loglabel\">Username</label>\n\t<input\n\t   type=\"text\"\n\t   name=\"username\"\n\t   id=\"username\"\n\t   value={username}\n\t   onChange={handleUsernameChange}\n\t />\n\t <label htmlFor=\"password\" className=\"loglabel\">Password</label>\n\t <input\n\t   type=\"password\"\n\t   name=\"password\"\n\t   id=\"password\"\n\t   value={password}\n\t   onChange={handlePasswordChange}\n\t />\n\t <input\n\t   type=\"submit\"\n\t   id=\"login\"\n\t   value=\"Login\"\n\t   name=\"submit\"\n\t />\n\t <Link id=\"slink\" to=\"/signup\">Sign Up</Link>\n    </form>\n    </div>\n   </div>\n  )\n}\n\nexport default Login\n"],"sourceRoot":""}